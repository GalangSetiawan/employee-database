<p-toast></p-toast>
<p-confirmDialog [style]="{width: '50vw', minWidth: '420px'}"></p-confirmDialog>

<div class="uk-heading-small" id="title-input">
  <span *ngIf="screenMode == 'input'">Input data karyawan</span>
  <span *ngIf="screenMode == 'edit'">Edit data karyawan</span>
</div>

<div class="row">
    <div class="col-md-4">
      <div class="uk-card ">
        <h4 class="uk-card-title">
          <span *ngIf="activeIndex == 0">Data pribadi</span>
          <span *ngIf="activeIndex == 1">Data kepegawaian</span>
        </h4>
        <p *ngIf="activeIndex == 0">Mohon lengkapi data yang wajib diisi sebelum pindah ke halaman selanjutnya.</p>
        <p *ngIf="activeIndex == 1">Mohon lengkapi data yang wajib diisi untuk dapat menyimpan data.</p>
    </div>
    </div>
    <div class="col-md-8">
        <p-steps [model]="items" [readonly]="false" [activeIndex]="activeIndex" (activeIndexChange)="onActiveIndexChange($event)"></p-steps>
    </div>
</div>



<ng-container *ngIf="activeIndex == 0">



  <div class="row mt-4">
    <div class="col-md-12">

      <div class="uk-card uk-card-default uk-card-body uk-width-1-1@m">
          <h4 class="uk-card-title">Biodata</h4>
          


          <form [formGroup]="dataPribadiForm">

              <div class="row">
                  <div class="col-md-4">
                    <div class="p-field ">
                      <span class="p-float-label">
                        <input type="text" id="nik" pInputText formControlName="nik"> 
                        <label for="nik">NIK *</label>
                      </span>
                    </div>
                  </div>
              </div>

              <div class="row">
                <div class="col-md-4">
                  <div class="p-field ">
                    <span class="p-float-label">
                      <input type="text" id="firstName" pInputText formControlName="firstName"> 
                      <label for="firstName">Nama depan *</label>
                    </span>
                  </div>
                </div>
        
                <div class="col-md-4">
                  <div class="p-field ">
                    <span class="p-float-label">
                      <input type="text" id="lastName" pInputText formControlName="lastName"> 
                      <label for="lastName">Nama belakang</label>
                    </span>
                  </div>
                </div>
              </div>

              <div class="row">
                  <div class="col-md-4">
                    <div class="p-field ">
                      <span class="p-float-label">
                        <input type="text" id="countryBirth" pInputText formControlName="countryBirth"> 
                        <label for="countryBirth">Kota lahir *</label>
                      </span>
                    </div>
                  </div>
          
                  <div class="col-md-4">
                    <div class="p-field ">
                      <span class="p-float-label">
                          <p-calendar 
                              id="birthDate"
                              formControlName="birthDate"
                              [maxDate]="maxDate"
                              appendTo="body"
                              [showIcon]="true">
                          </p-calendar>
                          <label for="birthDate">Tanggal lahir *</label>
                      </span>
                    </div>
                  </div>
                </div>


                <div class="row">
                  <div class="col-md-4">
                    <div class="p-field ">
                      <span class="p-float-label">
                        <p-dropdown
                          id="gender"
                          name="gender"
                          formControlName="gender"
                          [showClear]="true"
                          appendTo="body"
                          [options]="jenisKelaminList"
                          placeholder="Jenis kelamin"
                          [optionLabel]="'nama'">
                        </p-dropdown>
                        <label for="gender">Jenis kelamin *</label>
                      </span>
                    </div>
                  </div>

                  <div class="col-md-4">
                    <div class="p-field ">
                      <span class="p-float-label">
                        <p-dropdown
                          id="agama"
                          name="agama"
                          formControlName="agama"
                          [showClear]="true"
                          appendTo="body"
                          [options]="agamaList"
                          placeholder="Agama"
                          [optionLabel]="'nama'">
                        </p-dropdown>
                        <label for="agama">Agama *</label>
                      </span>
                    </div>
                  </div>

                </div>

                <div class="row">
                  <div class="col-md-4">
                    <div class="p-field ">
                      <span class="p-float-label">
                        <p-dropdown
                          id="marriageStatus"
                          name="marriageStatus"
                          formControlName="marriageStatus"
                          [showClear]="true"
                          appendTo="body"
                          [options]="statusPernikahanList"
                          placeholder="Status pernikahan"
                          [optionLabel]="'nama'">
                        </p-dropdown>
                        <label for="marriageStatus">Status pernikahan *</label>
                      </span>
                    </div>
                  </div>

                  <div class="col-md-4">
                    <div class="p-field ">
                      <span class="p-float-label">
                        <p-inputMask mask="9999999999999999" formControlName="identityNumber"  placeholder="16 digit nomor KTP"></p-inputMask>
                        <label for="identityNumber">Nomor KTP *</label>
                      </span>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-4">
                    <div class="p-field ">
                      <span class="p-float-label">
                        <p-dropdown
                          id="ptkpStatus"
                          name="ptkpStatus"
                          formControlName="ptkpStatus"
                          [showClear]="true"
                          appendTo="body"
                          [options]="statusPtkpList"
                          placeholder="Status PTKP"
                          [optionLabel]="'code'">
                        </p-dropdown>
                        <label for="ptkpStatus">Status PTKP *</label>
                      </span>
                    </div>
                  </div>
                </div>

          </form>


      </div>

    </div>
  </div>

  <div class="row mt-4">
    <div class="col-md-12">

        <div class="uk-card uk-card-default uk-card-body uk-width-1-1@m">
            <h4 class="uk-card-title">Informasi kontak</h4>
            


            <form [formGroup]="dataPribadiForm">

                <div class="row">
                  <div class="col-md-4">
                    <div class="p-field ">
                      <span class="p-float-label">
                        <p-inputMask mask="(999) 999-999-999"  id="telpNumber" formControlName="telpNumber" placeholder="(999) 999-999-999"></p-inputMask>
                        <label for="telpNumber">Nomor telepon</label>
                      </span>
                    </div>
                  </div>
        
                  <div class="col-md-4">
                    <div class="p-field ">
                      <span class="p-float-label">
                        <p-inputMask mask="(999) 999-999-999"  id="hanphoneNumber" formControlName="hanphoneNumber" placeholder="(999) 999-999-999"></p-inputMask>
                        <label for="hanphoneNumber">Nomor handphone *</label>
                      </span>
                    </div>
                  </div>
          
                  <div class="col-md-4">
                    <div class="p-field ">
                      <span class="p-float-label">
                        <input type="text" id="email" pInputText formControlName="email"> 
                        <label for="email">Email *</label>
                      </span>
                    </div>
                  </div>
                </div>

                <div class="row mb-3">
                  <div class="col-md-12">
                    <p-checkbox formControlName="isDiffDomicili" [binary]="true"  inputId="isDiffDomicili"></p-checkbox>
                    <label for="isDiffDomicili">&nbsp; Alamat KTP dan alamat domisili berbeda</label>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-6">

                    <div class="row">
                      <div class="col-md-12">
                        <div class="p-field ">
                          <span class="p-float-label">
                            <textarea rows="5" cols="30" id="idAddress" pInputTextarea formControlName="idAddress"></textarea>
                            <label for="idAddress">Alamat KTP</label>
                          </span>
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12">
                        <div class="p-field ">
                          <span class="p-float-label">
                            <p-dropdown
                              id="idProvinsi"
                              name="idProvinsi"
                              formControlName="idProvinsi"
                              (onChange)="onProvinsiChange($event)"
                              [filter]="true" 
                              filterBy="nama"
                              [showClear]="true"
                              appendTo="body"
                              [options]="provinsiList"
                              placeholder="Provinsi"
                              [optionLabel]="'nama'">
                            </p-dropdown>
                            <label for="idProvinsi">Provinsi</label>
                          </span>
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12">
                        <div class="p-field ">
                          <span class="p-float-label">
                            <p-dropdown
                              id="idKabupaten"
                              name="idKabupaten"
                              formControlName="idKabupaten"
                              (onChange)="onKabupatenChange($event)"
                              [filter]="true" 
                              filterBy="nama"
                              [showClear]="true"
                              appendTo="body"
                              [options]="kabupatenList"
                              placeholder="Kabupaten"
                              [optionLabel]="'nama'">
                            </p-dropdown>
                            <label for="idKabupaten">Kabupaten</label>
                          </span>
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12">
                        <div class="p-field ">
                          <span class="p-float-label">
                            <p-dropdown
                              id="idKecamatan"
                              name="idKecamatan"
                              formControlName="idKecamatan"
                              (onChange)="onKecamatanChange($event)"
                              [filter]="true" 
                              filterBy="nama"
                              [showClear]="true"
                              appendTo="body"
                              [options]="kecamatanList"
                              placeholder="Kecamatan"
                              [optionLabel]="'nama'">
                            </p-dropdown>
                            <label for="idKecamatan">Kecamatan</label>
                          </span>
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12">
                        <div class="p-field ">
                          <span class="p-float-label">
                            <p-dropdown
                              id="idKelurahan"
                              name="idKelurahan"
                              formControlName="idKelurahan"
                              [filter]="true" 
                              filterBy="nama"
                              [showClear]="true"
                              appendTo="body"
                              [options]="kelurahanList"
                              placeholder="Kelurahan"
                              [optionLabel]="'nama'">
                            </p-dropdown>
                            <label for="idKelurahan">Kelurahan</label>
                          </span>
                        </div>
                      </div>
                    </div>


                  </div>

                  <div class="col-md-6" *ngIf="dataPribadiForm.value.isDiffDomicili">

                    <div class="row">
                      <div class="col-md-12">
                        <div class="p-field ">
                          <span class="p-float-label">
                            <textarea rows="5" cols="30" id="domiciliAddress" pInputTextarea formControlName="domiciliAddress"></textarea>
                            <label for="domiciliAddress">Alamat domisili</label>
                          </span>
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12">
                        <div class="p-field ">
                          <span class="p-float-label">
                            <p-dropdown
                              id="domiciliProvinsi"
                              name="domiciliProvinsi"
                              formControlName="domiciliProvinsi"
                              (onChange)="onProvinsiChange($event, true)"
                              [filter]="true" 
                              filterBy="nama"
                              [showClear]="true"
                              appendTo="body"
                              [options]="provinsiDomisiliList"
                              placeholder="Provinsi"
                              [optionLabel]="'nama'">
                            </p-dropdown>
                            <label for="domiciliProvinsi">Provinsi</label>
                          </span>
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12">
                        <div class="p-field ">
                          <span class="p-float-label">
                            <p-dropdown
                              id="domiciliKabupaten"
                              name="domiciliKabupaten"
                              formControlName="domiciliKabupaten"
                              (onChange)="onKabupatenChange($event, true)"
                              [filter]="true" 
                              filterBy="nama"
                              [showClear]="true"
                              appendTo="body"
                              [options]="kabupatenDomisiliList"
                              placeholder="Kabupaten"
                              [optionLabel]="'nama'">
                            </p-dropdown>
                            <label for="domiciliKabupaten">Kabupaten</label>
                          </span>
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12">
                        <div class="p-field ">
                          <span class="p-float-label">
                            <p-dropdown
                              id="domiciliKecamatan"
                              name="domiciliKecamatan"
                              formControlName="domiciliKecamatan"
                              (onChange)="onKecamatanChange($event, true)"
                              [filter]="true" 
                              filterBy="nama"
                              [showClear]="true"
                              appendTo="body"
                              [options]="kecamatanDomisiliList"
                              placeholder="Kecamatan"
                              [optionLabel]="'nama'">
                            </p-dropdown>
                            <label for="domiciliKecamatan">Kecamatan</label>
                          </span>
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12">
                        <div class="p-field ">
                          <span class="p-float-label">
                            <p-dropdown
                              id="domiciliKelurahan"
                              name="domiciliKelurahan"
                              formControlName="domiciliKelurahan"
                              [filter]="true" 
                              filterBy="nama"
                              [showClear]="true"
                              appendTo="body"
                              [options]="kelurahanDomisiliList"
                              placeholder="Kelurahan"
                              [optionLabel]="'nama'">
                            </p-dropdown>
                            <label for="domiciliKelurahan">Kelurahan</label>
                          </span>
                        </div>
                      </div>
                    </div>


                  </div>
                </div>

                

            </form>


        </div>

    </div>
  </div>

  <p-messages [(value)]="messages" [enableService]="false" [closable]="true"></p-messages>

  
  <div class="row mt-3 mb-3">
    <div class="col-md-3">
      <button id="btnSearch" pButton pRipple class="p-button" (click)="gotoNextTab()"> 
        <span> Selanjutnya </span>
      </button>
      &nbsp;
      <button pButton pRipple  class="p-button-outlined" (click)="batal()"> 
        <span>Batal</span>
      </button>

    </div>
  </div>

</ng-container>

<ng-container *ngIf="activeIndex == 1">
  <div class="row mt-4">
    <div class="col-md-12">

      <div class="uk-card uk-card-default uk-card-body uk-width-1-1@m">

        <h4 class="uk-card-title">Data kepegawaian</h4>
        <form [formGroup]="dataKepegawaianForm">

          <div class="row">
            <div class="col-md-4">
              <div class="p-field ">
                <span class="p-float-label">
                  <p-calendar 
                    id="startWorkingDate"
                    formControlName="startWorkingDate"
                    appendTo="body"
                    [showIcon]="true">
                  </p-calendar>
                  <label for="startWorkingDate">Tanggal masuk kerja *</label>
                </span>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-4">
              <div class="p-field ">
                <span class="p-float-label">
                  <p-dropdown
                    id="employeeStatus"
                    name="employeeStatus"
                    formControlName="employeeStatus"
                    [showClear]="true"
                    (onChange)="onStatusKepegawaianChange($event)"
                    appendTo="body"
                    [options]="statusKepegawaianList"
                    placeholder="Status kepegawaian"
                    [optionLabel]="'nama'">
                  </p-dropdown>
                  <label for="employeeStatus">Status kepegawaian *</label>
                </span>
              </div>
            </div>

            <div class="col-md-4" *ngIf="showInputContractDate">
              <div class="p-field ">
                <span class="p-float-label">
                  <p-calendar 
                    id="startContractDate"
                    formControlName="startContractDate"
                    appendTo="body"
                    placeholder="Tanggal awal kontrak"
                    [showIcon]="true">
                  </p-calendar>
                  <label for="startContractDate">Tanggal awal kontrak *</label>
                </span>
              </div>
            </div>

            <div class="col-md-4" *ngIf="showInputContractDate">
              <div class="p-field ">
                <span class="p-float-label">
                  <p-calendar 
                    id="endContractDate"
                    formControlName="endContractDate"
                    placeholder="Tanggal akhir kontrak"
                    appendTo="body"
                    [showIcon]="true">
                  </p-calendar>
                  <label for="endContractDate">Tanggal akhir kontrak *</label>
                </span>
              </div>
            </div>

          </div>

          <div class="row">
            
            <div class="col-md-4">
              <div class="p-field ">
                <span class="p-float-label">
                  <input type="text" id="position" pInputText formControlName="position"> 
                  <label for="position">Jabatan *</label>
                </span>
              </div>
            </div>

            <div class="col-md-4">
              <div class="p-field ">
                <span class="p-float-label">
                  <p-dropdown
                    id="departement"
                    name="departement"
                    formControlName="departement"
                    [filter]="true" 
                    filterBy="nama"
                    [showClear]="true"
                    appendTo="body"
                    [options]="departemenList"
                    placeholder="Departemen"
                    [optionLabel]="'nama'">
                  </p-dropdown>
                  <label for="departement">Departemen *</label>
                </span>
              </div>
            </div>

          </div>

        </form>

      </div>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-md-12">

      <div class="uk-card uk-card-default uk-card-body uk-width-1-1@m">

        <h4 class="uk-card-title">Data penggajian</h4>
        <form [formGroup]="dataKepegawaianForm">

          <div class="row">
            <div class="col-md-4">
              <div class="p-field ">
                <span class="p-float-label">
                  <p-inputNumber formControlName="basicSalary" inputId="basicSalary" prefix="Rp"> </p-inputNumber>
                  <label for="basicSalary">Gaji *</label>
                </span>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-4">
              <div class="p-field ">
                <span class="p-float-label">
                  <p-dropdown
                    id="bankRekening"
                    name="bankRekening"
                    formControlName="bankRekening"
                    [filter]="true" 
                    filterBy="nama"
                    [showClear]="true"
                    appendTo="body"
                    [options]="bankList"
                    placeholder="Bank"
                    [optionLabel]="'name'">
                  </p-dropdown>
                  <label for="bankRekening">Bank *</label>
                </span>
              </div>
            </div>

            <div class="col-md-4">
              <div class="p-field ">
                <span class="p-float-label">
                  <input type="text" id="namaRekening" pInputText formControlName="namaRekening"> 
                  <label for="namaRekening">Nama rekening *</label>
                </span>
              </div>
            </div>

            <div class="col-md-4">
              <div class="p-field ">
                <span class="p-float-label">
                  <p-inputNumber formControlName="nomorRekening" [useGrouping]="false" inputId="nomorRekening"> </p-inputNumber>
                  <label for="nomorRekening">Nomor rekening *</label>
                </span>
              </div>
            </div>
          </div>



        </form>

      </div>
    </div>
  </div>

  <div class="row mt-3 mb-3">
    <div class="col-md-3">
      <button id="btnSearch" pButton pRipple class="p-button" [disabled]="dataKepegawaianForm.invalid" (click)="simpan()"> 
        <span> Simpan </span>
      </button>
      &nbsp;
      <button pButton pRipple  class="p-button-outlined" (click)="activeIndex = 0"> 
        <span>Kembali</span>
      </button>

    </div>
  </div>

</ng-container>